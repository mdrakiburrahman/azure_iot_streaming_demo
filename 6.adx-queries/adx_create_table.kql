//iot_stream
.create table iot_stream (timestamp: datetime, deviceId: string, temperature: double, humidity: double, windspeed: double, winddirection: string, rpm: double, angle: double, eventdate: date)
.create table iot_stream ingestion json mapping 'iot_streamMapping' '[{"column":"timestamp","path":"$.timestamp","datatype":"datetime"}, {"column":"deviceId","path":"$.deviceId","datatype":"string"}, {"column":"temperature","path":"$.temperature","datatype":"double"}, {"column":"humidity","path":"$.humidity","datatype":"double"}, {"column":"windspeed","path":"$.windspeed","datatype":"double"}, {"column":"winddirection","path":"$.winddirection","datatype":"string"}, {"column":"rpm","path":"$.rpm","datatype":"double"}, {"column":"angle","path":"$.angle","datatype":"double"}, {"column":"eventdate","path":"$.date","datatype":"date"}]'

//alarms
.create table alarms (eventdate: date, deviceid: string, window: datetime, rpm: double, angle: double, temperature: double, humidity: double, windspeed: double, winddirection: string,  alarm_timestamp: datetime)
.create table alarms ingestion json mapping 'alarmsMapping' '[{"column":"eventdate","path":"$.date","datatype":"date"}, {"column":"deviceid","path":"$.deviceid","datatype":"string"}, {"column":"window","path":"$.window","datatype":"datetime"}, {"column":"rpm","path":"$.rpm","datatype":"double"}, {"column":"angle","path":"$.angle","datatype":"double"}, {"column":"temperature","path":"$.temperature","datatype":"double"}, {"column":"humidity","path":"$.humidity","datatype":"double"}, {"column":"windspeed","path":"$.windspeed","datatype":"double"}, {"column":"winddirection","path":"$.winddirection","datatype":"string"}, {"column":"alarm_timestamp","path":"$.alarm_timestamp","datatype":"datetime"}]'